<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <!-- Main JS (navbar.js, katex_init.js and masonry_init.js)-->
    <script defer=true src="/assets/js/main.min.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!--Favicon-->
    <link rel="shortcut icon" href="/assets/favi.ico" type="image/x-icon">

    <!-- Canonical -->
    <link rel="canonical" href="http://localhost:4000/2018/09/02/swift-DelegatePattern.html">

    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="Personal Blog Of KJS" href="http://localhost:4000///feed.xml"/>

    <!-- Font Awesome -->
    <!-- <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> -->
    <link rel="stylesheet" type="text/css" href="/assets/css/vendor/font-awesome.min.css">

    <!-- Google Fonts -->
    
    <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css"> 
    

    <!-- KaTeX 0.8.3 -->
    
    <link rel="stylesheet" type="text/css" href="/assets/css/vendor/katex.min.css">
    <script src="/assets/js/vendor/katex.min.js">
    </script>
    

    <!-- Google Analytics -->
    
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-121626260-1', 'auto');
        ga('send', 'pageview');

    </script>
    
    
    <!-- seo tags -->
    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>화면간 데이터 전달. 1편 | Personal Blog Of KJS</title>
<meta name="generator" content="Jekyll v3.8.3" />
<meta property="og:title" content="화면간 데이터 전달. 1편" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="델리게이트 패턴을 이용해보자" />
<meta property="og:description" content="델리게이트 패턴을 이용해보자" />
<link rel="canonical" href="http://localhost:4000/2018/09/02/swift-DelegatePattern.html" />
<meta property="og:url" content="http://localhost:4000/2018/09/02/swift-DelegatePattern.html" />
<meta property="og:site_name" content="Personal Blog Of KJS" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-09-02T00:00:00+09:00" />
<script type="application/ld+json">
{"description":"델리게이트 패턴을 이용해보자","@type":"BlogPosting","url":"http://localhost:4000/2018/09/02/swift-DelegatePattern.html","headline":"화면간 데이터 전달. 1편","dateModified":"2018-09-02T00:00:00+09:00","datePublished":"2018-09-02T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2018/09/02/swift-DelegatePattern.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <!-- Manual seo tags -->
    <!--
    <title>화면간 데이터 전달. 1편 | Personal Blog Of KJS</title>
    <meta name="description" content="델리게이트 패턴을 이용해보자">
    -->
</head>

  <body>
    <header class="site-header">
    
    <!-- Logo and title -->
	<div class="branding">
		<a href="/">
			<img class="avatar" src="/assets/img/swift_icon.png" alt=""/>
		</a>

		<h1 class="site-title">
			<a href="/">Personal Blog Of KJS</a>
		</h1>
	</div>
    
    <!-- Toggle menu -->
    <nav class="clear">
    <a id="pull" class="toggle" href="#">
    <i class="fa fa-bars fa-lg"></i>
    </a>
    
    <!-- Menu -->
    <ul class="hide">
        <!-- Auto Generation of NORMAL pages in the navbar -->
        
        
        
        
        
        
        
        <li class="separator"> | </li>
        <li>
            <a class="clear" href="/">
                Home
            </a>
        </li>
        
        
        
        
        
        
        <li class="separator"> | </li>
        <li>
            <a class="clear" href="/about/">
                About
            </a>
        </li>
        
        
        
        
        
        
        
        
        <li class="separator"> | </li>
        <li>
            <a class="clear" href="/gallery/">
                Gallery
            </a>
        </li>
        
        
        
        
        
        
        
        
        
        
        <li class="separator"> | </li>
        <li>
            <a class="clear" href="/portfolio/">
                Portfolio
            </a>
        </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
         
        
        <!-- Auto Generation of SPECIAL pages in the navbar -->
        
          
            <li class="separator"> | </li>
            <li>
                <a class="clear" href="http://localhost:4000/search">
                    <i class="fa fa-search" aria-hidden="true"></i>
                </a>
            </li>
          
        
          
            <li class="separator"> | </li>
            <li>
                <a class="clear" href="http://localhost:4000/tags">
                    <i class="fa fa-tags" aria-hidden="true"></i>
                </a>
            </li>
          
        
    </ul>
        
	</nav>
</header>

    <div class="content">
      <article >
  <header id="main" style="background-image: url('/')">
    <h1 id="%ED%99%94%EB%A9%B4%EA%B0%84+%EB%8D%B0%EC%9D%B4%ED%84%B0+%EC%A0%84%EB%8B%AC.+1%ED%8E%B8" class="title">화면간 데이터 전달. 1편</h1>
    <p class="meta">
    September 2, 2018
    
    </p>
  </header>
  <section class="post-content"><h3 id="델리게이트-패턴을-이용해보자">델리게이트 패턴을 이용해보자</h3>
<!--more-->

<p>이번 포스팅부터는 아이패드로 그림을 그리면서 설명을 진행 해보고자합니다~!</p>

<p>(그림엔 소질이 없지만 집에서 동영상 머신으로 쓰이는 비싼 아이패드 활용을 어떻게든 하고 싶어서……….)</p>

<p>어플을 만들다보면 데이터를 전달하는 빈도수는 상당히 높을것 입니다.</p>

<p>예를 몇가지 들어볼까요? (실제는 다르겠지만 이해를 위해 최대한 간결하게 설명을 진행을…!)</p>

<p></p>

<p>크게는 2가지로 볼수 있을겁니다!</p>

<p>아래 삐뚤삐둘한 그림을 보면서 설명을 하죠</p>

<p><img src="/assets/img/post/2018-09-02/img1.png" alt="" /></p>

<p>그림이 예술입니다.</p>

<p>연락처 화면  - 문자 화면 - 사진 전송을 위한 사진첩</p>

<p>이렇게 화면이 이루어져있습니다!</p>

<p>어떻게 2가지냐! 우선 이경우는 뷰는 스택 형식으로 쌓입니다</p>

<p>목록에서 친구 누군가를 탭할경우 그 화면이 목록 화면 위로 올라오게 되죠,</p>

<p>마찬가지로 문자 화면에서 사진 전송을 위해 사진 목록 화면을 띄우면 그화면은 문자 화면 위에 떠있게 됩니다!</p>

<p>그래서 하나씩 제거하면서 앞 화면으로 돌아가죠! 이렇게 되면 굳이 똑같은 화면을 다시 띄울 필요도 없고, 별도 처리 하지 않는 이상 데이터도 남아있으니깐요!</p>

<p><br /></p>

<h3 id="연락처-목록-to-문자-화면">연락처 목록 to 문자 화면</h3>

<p>이 경우에 리스트에서 친구1,2,3 중 한명을 탭하게 되면 문자 화면엔 누군가 친구x라고 뜨게 될것입니다.</p>

<p>그렇다는건 어떤 정보를 받아 왔으니깐 그 친구에 대한 정보를 통해 화면을 뿌려주고 연락을 주고 받겠죠!</p>

<p>이건 책에서도 많이 나오죠,  문자View 클래스의 인스턴스를 만들어주고 데이터를 넣어준뒤  present나 네비게이션바를 사용한다면 push 형식으로 띄워주겠죠! 일반적인 방법으로 소개하는 segue도 있을 수 있구요!</p>

<p><br /></p>

<h3 id="사진첩-to-문자-화면">사진첩 to 문자 화면</h3>

<p>이경우는 어떤 경우일까요? 사진 첨부를 위해 사진 추가버튼을 누르면 사진첩이 뜨게 되고, 이때, 사진을 누르게 되면 문자View에</p>

<p>첨부가 됩니다! 그렇다는 말은 사진첩의 사진 데이터가 문자view로 전달이 된거죠</p>

<p>이 케이스는 책에선 많이 없었던거 같네요.</p>

<p>그래서 이 케이스를 다루고자 합니다.</p>

<p>델리게이트 패턴을 이용하는것이죠, 프로토콜을 이용하기도 할것이고 인스턴스를 만들어서 사용하기도 할것입니다!</p>

<blockquote>
  <p>윗 말이 낯설고 어려울수도 있겠지만 결론적으로 궁극적인 목표는 VC2의 데이터를 VC1으로 보내는게 목표입니다!</p>
</blockquote>

<p><br /></p>

<h1 id="델리게이트">델리게이트</h1>

<p>델리게이트는 한국어 의미론 대리자 그러한 의미인데, 처음엔 이게 무슨 말인지 참 어렵더군요</p>

<p>쉽게 말하면</p>

<blockquote>
  <p>“내가 다 만들어 놨어, 넌 가져다써”</p>
</blockquote>

<p>정도로 지금은 생각하고 있습니다.</p>

<p>VC2에서 VC1으로 데이터를 수정해봅시다.</p>

<p>우선 VC1의 구성은 다음과 같습니다.</p>

<p><img src="/assets/img/post/2018-09-02/img2.png" alt="" /></p>

<p><img src="/assets/img/post/2018-09-02/img3.png" alt="" /></p>

<p>아주 심플하죠? ‘이름 써질곳’ Label이 있고, 그 Label에 텍스트를 넣는 함수가 있습니다.</p>

<p>이제 이 코드를 VC2에서 실행시킬것입니다.</p>

<p>VC2 구성은 다음과 같습니다.</p>

<p><img src="/assets/img/post/2018-09-02/img4.png" alt="" /></p>

<p><img src="/assets/img/post/2018-09-02/img5.png" alt="" /></p>

<p>여기또한 아주 심플하죠</p>

<p>눈여겨 봐야할 것은</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">var</span> <span class="nv">delegate</span><span class="p">:</span> <span class="kt">VC1</span><span class="p">?</span>
</code></pre></div></div>

<p>이 부분 입니다. 타입이 VC1입니다.</p>

<p>그리고 버튼 실행 내용쪽에 보면</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">delegate</span><span class="p">?</span><span class="o">.</span><span class="nf">insert</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="n">text</span><span class="o">!</span><span class="p">)</span>
</code></pre></div></div>

<p>여기 입니다! VC2에는 저런 함수가 없죠. 타입이 VC1인 delegate의 내부 함수이니깐요.</p>

<blockquote>
  <p>VC1에 다 만들어져있습니다. 가져다 쓰세요</p>
</blockquote>

<p>실행해볼까요?</p>

<p>안될겁니다.</p>

<p>왜냐! VC1 타입을 선언해줬지만 어떤 VC1인지 모릅니다.</p>

<p>이게 무슨 해괴한 소리냐면</p>

<p>해괴한 그림과 함께 설명들어갑니다.</p>

<p><img src="/assets/img/post/2018-09-02/img6.png" alt="" /></p>

<p>(직선 깔끔히 그리는 방법 찾았어요)</p>

<p>이 그림을 보면 많은분들이 이렇게 생각하실겁니다.</p>

<p>“VC1꺼 불러왔잔아!!”</p>

<p>네 VC1꺼 부른것 맞습니다. 그치만 누군지 모릅니다</p>

<p>또 해괴한 소리였죠.</p>

<p>만약 VC1화면이 3개가 있고, insert(name:_)를 호출 하면 어떻게 될까요?</p>

<p>이해가 안되신분들이라면 이렇게 생각하실 겁니다.</p>

<p><img src="/assets/img/post/2018-09-02/img7.png" alt="" /></p>

<p>그렇지 않나요?</p>

<p>개념적으로 생각의 변화가 필요합니다!</p>

<p>VC2에서 delegate는 단순히 타입을 VC1인 변수를 선언한거고 각 VC1들과는 별개입니다.</p>

<p>그럼 어떻게 하냐</p>

<p>VC1에서 아래 코드를 추가해줍니다. (segue 사용했습니다.)</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">override</span> <span class="kd">func</span> <span class="nf">prepare</span><span class="p">(</span><span class="k">for</span> <span class="nv">segue</span><span class="p">:</span> <span class="kt">UIStoryboardSegue</span><span class="p">,</span> <span class="nv">sender</span><span class="p">:</span> <span class="kt">Any</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">vc2</span> <span class="o">=</span> <span class="n">segue</span><span class="o">.</span><span class="n">destination</span> <span class="k">as?</span> <span class="kt">VC2</span> <span class="p">{</span>
            <span class="n">vc2</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>우선! override니깐 상속 받은 UIViewController에 기본적으로 들어있던 함수고 내용을 살짝 바꾼겁니다</p>

<p>함수 내부를 보면,</p>

<p>vc라는 변수를 안전하게 만들어줍니다, let과 if를 사용해서 vc라는 상수를 만들지만 nil일 경우 if문은 실패 처리되어 앱이 죽지 않고 단순히 다음코드로 넘어가게 됩니다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">segue</span><span class="o">.</span><span class="n">destination</span> <span class="k">as?</span> <span class="kt">VC2</span>
</code></pre></div></div>

<p>이 코드를 보면, segue의 목적지를 VC2로 캐스팅을 합니다! 즉, 화면 이동하려는곳이 VC2가 맞는지 확인 하는겁니다.</p>

<p>if문에 문제가 없다는 가정하에 vc를 하죠</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">vc2</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
</code></pre></div></div>

<p>여기가 포인트 입니다.</p>

<blockquote>
  <p>vc2에 delegate의 VC1이 나야!!</p>
</blockquote>

<p>이런 의미입니다. 그 타입의 대상자가 누군지 말해주는거죠.</p>

<p>아래 이미지처럼 대상자를 지목 하는거라고 보면 됩니다.</p>

<p><img src="/assets/img/post/2018-09-02/img8.png" alt="" /></p>

<p>그럼 결과를 볼까요?</p>

<p><img src="/assets/img/post/2018-09-02/img9.png" alt="" /></p>

<p><img src="/assets/img/post/2018-09-02/img10.png" alt="" /></p>

<p>잘 넘어왔네요~ 스탠포드 교수님께선 이런 방식을 델리게이트 패턴이라 칭하더군요! (유투브 공개강의) (아직 용어가 어려워요)</p>

<p>못난 아이패드 그림이었지만! 핵심이었으니 꼭 그린 부분을 중점으로 봐야 이해가 수월 할것 같네요</p>

<p>다음번엔 Protocol로 데이터 넘기는 방식을 써보겠습니다.</p>
</section>
  
  <!-- Social media shares -->
  <div class="share-buttons">
    <ul class="share-buttons">
        <div class="meta">Share</div>
        
        <li>
            <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/2018/09/02/swift-DelegatePattern.html" target="_blank" title="Share on Facebook">
			<i class="fa fa-facebook-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Share on Facebook</span>
		</a>
        </li>
         
        <li>
            <a href="https://twitter.com/intent/tweet?source=http://localhost:4000/2018/09/02/swift-DelegatePattern.html&text=화면간 데이터 전달. 1편%20%7C%20Personal Blog Of KJS:%20http://localhost:4000/2018/09/02/swift-DelegatePattern.html" target="_blank" title="Tweet">
			<i class="fa fa-twitter-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Tweet</span>
		</a>
        </li>
         
        <li>
            <a href="https://plus.google.com/share?url=http://localhost:4000/2018/09/02/swift-DelegatePattern.html" target="_blank" title="Share on Google+">
			<i class="fa fa-google-plus-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Share on Google+</span>
		</a>
        </li>
            
        <li>
            <a href="http://www.reddit.com/submit?url=http://localhost:4000/2018/09/02/swift-DelegatePattern.html&title=화면간 데이터 전달. 1편%20%7C%20Personal Blog Of KJS" target="_blank" title="Share on Reddit">
			<i class="fa fa-reddit-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Share on Reddit</span>
		</a>
        </li>
           
        <li>
            <a href="mailto:?subject=화면간 데이터 전달. 1편%20%7C%20Personal Blog Of KJS&body=:%20http://localhost:4000/2018/09/02/swift-DelegatePattern.html" target="_blank" title="Email">
			<i class="fa fa-envelope-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Email</span>
		</a>
        </li>
        
    </ul>
</div>
   
   <!-- Tag list -->
  
  


<footer>
  <div class="tag-list">
    
      <div class="meta">Tags</div>
    

    
    <a class="button" href="/tags#Delegate Pattern">
      <p><i class="fa fa-tag fa-fw"></i> Delegate Pattern</p>
    </a>
    
    <a class="button" href="/tags#델리게이트">
      <p><i class="fa fa-tag fa-fw"></i> 델리게이트</p>
    </a>
    
  </div>
</footer>

    
</article>

<!-- Disqus -->

<div class="comments">
  <div id="disqus_thread"></div>
<script type="text/javascript">
	var disqus_shortname = 'https-jiseobkim-github-io';
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view comments.</noscript>

</div>


<!-- Post navigation -->

  <div id="post-nav">
  
  <div id="previous-post" class="post-nav-post">
      <p>Previous post</p>
      <a href="/2018/08/19/swift-Generic-&-Codable.html">
        Generic & Codable
      </a>
  </div>
  
  
  <div id="next-post" class="post-nav-post">
      <p>Next post</p>
      <a href="/2018/09/16/swift-DelegatePattern2.html">
        화면간 데이터 전달. 2편
      </a>
  </div>
  
</div>

    </div>
    
<footer class="site-footer">
    <p class="text"><div style = "text-align:center"> Contact me, Anytime! </div>
</p>
            <div class="footer-icons">
                <ul>
                <!-- Social icons from Font Awesome, if enabled -->
                
<li>
	<a href="http://localhost:4000/feed.xml" title="Follow RSS feed">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>



<li>
	<a href="mailto:jiseob812@gmail.com" title="Email">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>













<li>
	<a href="https://github.com/JiSeobKim" title="Follow on GitHub">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-github fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>
































                </ul>
            </div>
</footer>




  </body>
</html>
